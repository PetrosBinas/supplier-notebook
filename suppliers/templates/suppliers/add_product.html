<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>AddProduct</title>
    </head>
    <body>
        <h1>Product Management</h1>
        <h2>Add a new Product</h2>
        <form action="" method="post">
            {% csrf_token %}
            <label for="product-name">Product Name</label>
            <input type="text"
            name="product-name">

            <label for="unit">Unit</label>
            <input type="search"
            name="unit"
            list="unit-options">

            <datalist id="unit-options">
                {% for unit in units %}
                    <option value="{{ unit }}"></option>
                {% endfor %}
            </datalist>

            <label for="price">Price per Unit</label>
            <input type="number"
            name="price"
            min="0.01"
            step="0.01">

            <label for="supplier">Supplier</label>
            <input type="search"
            name="supplier"
            list="supplier-options">

            <datalist id="supplier-options">
                {% for supplier in suppliers %}
                    <option value="{{ supplier.name }}"></option>
                {% endfor %}
            </datalist>

            <button type="submit" name="action" value="add">Add Product</button>
        </form>
        <h2>Remove or Update a Product</h2>
        <form action="" method="post">
            {% csrf_token %}
            <label for="product-name">Product Name</label>
            <input type="search"
            name="product-name"
            list="product-options">

            <datalist id="product-options">
                {% for product in all_products %}
                    <option value="{{ product.name }}"></option>
                {% endfor %}
            </datalist>

            <label for="unit">Unit</label>
            <input type="search"
            name="unit"
            list="unit-options">

            <datalist id="unit-options">
                {% for unit in units %}
                    <option value="{{ unit }}"></option>
                {% endfor %}
            </datalist>

            <label for="price">Price per Unit</label>
            <input type="number"
            name="price"
            min="0.01"
            step="0.01">

            <label for="supplier">Supplier</label>
            <input type="search"
            name="supplier"
            list="supplier-options">

            <datalist id="supplier-options">
                {% for supplier in suppliers %}
                    <option value="{{ supplier.name }}"></option>
                {% endfor %}
            </datalist>

            <button type="submit" name="action" value="delete">Remove Product</button>
            <button type="submit" name="action" value="update">Update Product</button>             
        </form>
        <h2>Existing Products</h2>
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Unit</th>
                    <th>Price per Unit</th>
                    <th>Supplier</th>
                </tr>
            </thead>
            <tbody>
                {% for product in all_products %}
                    <tr>
                        <td>{{ product.name }}</td>
                        <td>{{ product.unit }}</td>
                        <td>{{ product.price_per_unit }}</td>
                        <td>{{ product.supplier.name }}</td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="4">No Products Yet.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </body>
</html>